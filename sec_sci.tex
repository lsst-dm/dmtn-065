\section{Maximizing Science from Special Programs}\label{sec:sci}

High-level recommendations regarding RDM implementations to meet the 
requirements related to Special Programs summarized in Section~\ref{sec:req}.


\subsection{Labeling for Queryability}\label{ssec:sci_labels}

As described in Section~\ref{sec:req}, there is a requirement that metadata for 
observations associated with Special Programs is stored and is sufficient for 
triggering real-time data processing recipes.

Additionally, the Special Program science goals require that users are able to 
query and retrieve processed image and catalog data by specifiying the Special Program. 

Labelling is also essential for provenance and mini-survey 
characterizability (estimate selection biases), and for Special Programs 
processing by RDM or by users.

\textbf{All visits should have a region label \textit{and} a program 
label, and these labels should be propagated to all processed images and catalog data.}

\textbf{Region Labels -- } based on Right Acension and Declination.
Region labels should include, e.g., WFD low-dust, Galactic Plane, Galactic 
Bulge, SCP, NES, or Virgo; DDF fieldname; mini-survey region.
Region labels should be propagated to all processed images (visit, 
difference, and deep coadds) and all cataloged sources and objects. 

\textbf{Program Labels -- } 
Should be based on survey cadeance or strategy.
Program labels might include, e.g., WFD, DDF, mini-survey name, or other 
options like engineering, commissioning, and director's discretionary.
Program labels should be propagated to all single-visit processed and 
difference images, and all cataloged sources.

It would not make sense to propagate program labels to deep coadds or 
object tables, as these data products could be a mix of programs.

The existence and propagation of these labels is not a requirement.
This document suggests that these labels be the adopted implementation for 
the metadata requirements (see Section~\ref{ssec:req_meta}).


\subsection{Processing and Data Products}

As described in Section~\ref{sec:req}, there is a requirement that 
Rubin Observatory produce unique, separate, and joinable data products 
whenever this is possible with the original or reconfigured versions of the 
LSST Science Pipelines (and no new algorithmic development or significant 
computational resources are needed).

From a science perspective, however, in some cases where it is \emph{possible} 
to produce such separate data products it is not \emph{necessary}.

While the sections referenced below contain examples, it is ultimately left to 
the discretion of the Rubin Operations Data Managment and System Performance teams 
to decide which Special Programs data products are generated by RDM.

\textbf{Possible but not necessary -- } 
For some science goals, although it would be possible to produce separate 
data products for a Special Program with the LSST Science Pipelines, this 
is not necessary because the visits can be processed with, and included in, 
the WFD data products (Section~\ref{ssec:proc_wfd}).

These cases are usually related to time domain astronomy, difference image
analysis (DIA), prompt processing, and alert production.
Users would simply incorporate the region and program labels in queries to restrict 
their analysis to only a certain Special Program (or only WFD) where the 
science goal requires it.

\textbf{Possible and necessary -- }
For some science goals, users will need distinct data products composed solely from visits associated with certain Special Programs (Section~\ref{ssec:proc_rdm}).

These cases are usually associated with image coaddition and the static-sky catalogs 
of sources detected and measured in the deeply coadded images. 

\textbf{Not possible but necessary -- }
For some science goals, users might require unique and separate data products, 
new algorithms or processing routines, and/or significant additional 
computational resources for Special Programs.
In these situations, user processing and user-generated data products will be 
needed (Section~\ref{ssec:proc_user}).


\subsection{Computational Resources for User Processing}

As mentioned in Section~\ref{ssec:req_ug}, Rubin Observatory will reserve 10\% of its 
total data processing capacity for users.
This component would include {\it all} user processing and re-processing of any and 
all LSST data, including Special Programs. 

As described in Section~\ref{ssec:proc_user} this processing capacity will be 
accessed via Rubin Science Platform, with a supported software environment and 
infrastructure for batch processing \citedsp{dmtn-202}.

Very computationally intense processing (e.g., shift-and-stack for faint moving 
objects) will likely require external resources\footnote{For more details about the boundary between what Rubin Observatory will provide (in terms of data products and processing resources) and what will be left to the expertise of the science community, see \url{https://www.lsst.org/about/dm/data-products}}.


\subsection{Rubin Science Platform Capabilities}

Users will need to be able to query for data that restricts by sky region and 
program label. 
This can be accomplished by including those labels in all image and catalog 
metadata as described in Section~\ref{ssec:sci_labels}, as the TAP service 
and butler already provide the mechanism for user-specified queries.

Users will need to be able to discover Special Programs data products when 
browsing data, such as all-sky maps. 


